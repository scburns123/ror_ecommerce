!function(e,t,s,n){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.2",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(t,s,n){return"object"==typeof s&&e.extend(!0,this.settings,s),"string"!=typeof s?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[s].call(this,n)},assemble:function(){var t=this;e('form.custom input[type="radio"],[type="checkbox"]',e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(function(e,s){t.set_custom_markup(s)}).change(function(){t.set_custom_markup(this)}),e("form.custom select",e(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var n=this;e(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),n.toggle_checkbox(e(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),n.toggle_radio(e(this))}).on("change.fndtn.forms","form.custom select",function(t,s){e(this).is('[data-customforms="disabled"]')||n.refresh_custom_select(e(this),s)}).on("click.fndtn.forms","form.custom label",function(t){if(e(t.target).is("label")){var s,i,o=e("#"+n.escape(e(this).attr("for"))).not('[data-customforms="disabled"]');0!==o.length&&("checkbox"===o.attr("type")?(t.preventDefault(),s=e(this).find("span.custom.checkbox"),0===s.length&&(s=o.add(this).siblings("span.custom.checkbox").first()),n.toggle_checkbox(s)):"radio"===o.attr("type")&&(t.preventDefault(),i=e(this).find("span.custom.radio"),0===i.length&&(i=o.add(this).siblings("span.custom.radio").first()),n.toggle_radio(i)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var s=e(this),o=s.closest("div.custom.dropdown"),a=i(o,"select");return o.hasClass("open")||e(n.scope).trigger("click"),t.preventDefault(),!1===a.is(":disabled")?(o.toggleClass("open"),o.hasClass("open")?e(n.scope).on("click.fndtn.forms.customdropdown",function(){o.removeClass("open"),e(n.scope).off(".fndtn.forms.customdropdown")}):e(n.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(t){var n=e(this),o=n.closest("div.custom.dropdown"),a=i(o,"select"),c=0;if(t.preventDefault(),t.stopPropagation(),!e(this).hasClass("disabled")){e("div.dropdown").not(o).removeClass("open");var d=n.closest("ul").find("li.selected");if(d.removeClass("selected"),n.addClass("selected"),o.removeClass("open").find("a.current").text(n.text()),n.closest("ul").find("li").each(function(e){n[0]===this&&(c=e)}),a[0].selectedIndex=c,a.data("prevalue",d.html()),"undefined"!=typeof s.createEvent){var l=s.createEvent("HTMLEvents");l.initEvent("change",!0,!0),a[0].dispatchEvent(l)}else a[0].fireEvent("onchange")}}),e(t).on("keydown",function(t){var n=(s.activeElement,Foundation.libs.forms),o=e(".custom.dropdown"),a=i(o,"select"),c=e("input,select,textarea,button");if(o.length>0&&o.hasClass("open")){if(t.preventDefault(),9===t.which&&(e(c[e(c).index(a)+1]).focus(),o.removeClass("open")),13===t.which&&o.find("li.selected").trigger("click"),27===t.which&&o.removeClass("open"),t.which>=65&&t.which<=90){var d=n.go_to(o,t.which),l=o.find("li.selected");d&&(l.removeClass("selected"),n.scrollTo(d.addClass("selected"),300))}if(38===t.which){var l=o.find("li.selected"),r=l.prev(":not(.disabled)");r.length>0&&(r.parent()[0].scrollTop=r.parent().scrollTop()-n.outerHeight(r),l.removeClass("selected"),r.addClass("selected"))}else if(40===t.which){var l=o.find("li.selected"),d=l.next(":not(.disabled)");d.length>0&&(d.parent()[0].scrollTop=d.parent().scrollTop()+n.outerHeight(d),l.removeClass("selected"),d.addClass("selected"))}}}),e(t).on("keyup",function(){var t=s.activeElement,n=e(".custom.dropdown");t===n.find(".current")[0]&&n.find(".selector").focus().click()}),this.settings.init=!0},go_to:function(e,t){var s=e.find("li"),n=s.length;if(n>0)for(var i=0;n>i;i++){var o=s.eq(i).text().charAt(0).toLowerCase();if(o===String.fromCharCode(t).toLowerCase())return s.eq(i)}},scrollTo:function(e,t){if(!(0>t)){var s=e.parent(),n=this.outerHeight(e),i=n*e.index()-s.scrollTop(),o=i/t*10;this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(o,10))||(s[0].scrollTop=s.scrollTop()+o,this.scrollTo(e,t-10))}.bind(this),10)}},set_custom_markup:function(t){var s=e(t),n=s.attr("type"),i=s.next("span.custom."+n);s.parent().hasClass("switch")||s.addClass("hidden-field"),0===i.length&&(i=e('<span class="custom '+n+'"></span>').insertAfter(s)),i.toggleClass("checked",s.is(":checked")),i.toggleClass("disabled",s.is(":disabled"))},append_custom_select:function(t,s){var n,i=Foundation.libs.forms,o=e(s),a=o.next("div.custom.dropdown"),c=a.find("ul"),d=(a.find(".current"),a.find(".selector")),l=o.find("option"),r=l.filter(":selected"),h=o.attr("class")?o.attr("class").split(" "):[],f=0,u="",m=!1;if(0===a.length){var p=o.hasClass("small")?"small":o.hasClass("medium")?"medium":o.hasClass("large")?"large":o.hasClass("expand")?"expand":"";a=e('<div class="'+["custom","dropdown",p].concat(h).filter(function(e,t,s){return""===e?!1:s.indexOf(e)===t}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),d=a.find(".selector"),c=a.find("ul"),u=l.map(function(){var t=e(this).attr("class")?e(this).attr("class"):"";return"<li class='"+t+"'>"+e(this).html()+"</li>"}).get().join(""),c.append(u),m=a.prepend('<a href="#" class="current">'+(r.html()||"")+"</a>").find(".current"),o.after(a).addClass("hidden-field")}else u=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),c.html("").append(u);if(i.assign_id(o,a),a.toggleClass("disabled",o.is(":disabled")),n=c.find("li"),i.cache[a.data("id")]=n.length,l.each(function(t){this.selected&&(n.eq(t).addClass("selected"),m&&m.html(e(this).html())),e(this).is(":disabled")&&n.eq(t).addClass("disabled")}),!a.is(".small, .medium, .large, .expand")){a.addClass("open");var i=Foundation.libs.forms;i.hidden_fix.adjust(c),f=i.outerWidth(n)>f?i.outerWidth(n):f,Foundation.libs.forms.hidden_fix.reset(),a.removeClass("open")}},assign_id:function(e,t){var s=[+new Date,Foundation.random_str(5)].join("-");e.attr("data-id",s),t.attr("data-id",s)},refresh_custom_select:function(t,s){var n=this,i=0,o=t.next(),a=t.find("option"),c=o.find("ul"),d=o.find("li");if(a.length!==this.cache[o.data("id")]||s){c.html("");var l="";a.each(function(){var t=e(this),s=t.html(),n=this.selected;l+='<li class="'+(n?" selected ":"")+(t.is(":disabled")?" disabled ":"")+'">'+s+"</li>",n&&o.find(".current").html(s)}),c.html(l),o.removeAttr("style"),c.removeAttr("style"),o.find("li").each(function(){o.addClass("open"),n.outerWidth(e(this))>i&&(i=n.outerWidth(e(this))),o.removeClass("open")}),d=o.find("li"),this.cache[o.data("id")]=d.length}},refresh_custom_selection:function(t){var s=e("option:selected",t).text();e("a.current",t.next()).text(s)},toggle_checkbox:function(e){var t=e.prev(),s=t[0];!1===t.is(":disabled")&&(s.checked=s.checked?!1:!0,e.toggleClass("checked"),t.trigger("change"))},toggle_radio:function(e){var t=e.prev(),s=t.closest("form.custom"),n=t[0];!1===t.is(":disabled")&&(s.find('input[type="radio"][name="'+this.escape(t.attr("name"))+'"]').next().not(e).removeClass("checked"),e.hasClass("checked")||e.toggleClass("checked"),n.checked=e.hasClass("checked"),t.trigger("change"))},escape:function(e){return e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(t){var s=this;s.hidden=t.parents(),s.hidden=s.hidden.add(t).filter(":hidden"),s.hidden.each(function(){var t=e(this);s.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(s){var i=e(this),o=t.tmp[s];o===n?i.removeAttr("style"):i.attr("style",o)}),t.tmp=[],t.hidden=null}},off:function(){e(this.scope).off(".fndtn.forms")},reflow:function(){}};var i=function(t,s){for(var t=t.prev();t.length;){if(t.is(s))return t;t=t.prev()}return e()}}(Foundation.zj,this,this.document);