!function(e,t,s,n){"use strict";Foundation.libs.reveal={name:"reveal",version:"4.3.2",locked:!1,settings:{animation:"fadeAndPop",animationSpeed:250,closeOnBackgroundClick:!0,closeOnEsc:!0,dismissModalClass:"close-reveal-modal",bgClass:"reveal-modal-bg",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:e(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(t,s,n){return Foundation.inherit(this,"data_options delay"),"object"==typeof s?e.extend(!0,this.settings,s):"undefined"!=typeof n&&e.extend(!0,this.settings,n),"string"!=typeof s?(this.events(),this.settings.init):this[s].call(this,n)},events:function(){var t=this;return e(this.scope).off(".fndtn.reveal").on("click.fndtn.reveal","[data-reveal-id]",function(s){if(s.preventDefault(),!t.locked){var n=e(this),i=n.data("reveal-ajax");if(t.locked=!0,"undefined"==typeof i)t.open.call(t,n);else{var o=i===!0?n.attr("href"):i;t.open.call(t,n,{url:o})}}}).on("click.fndtn.reveal touchend",this.close_targets(),function(s){if(s.preventDefault(),!t.locked){var n=e.extend({},t.settings,t.data_options(e(".reveal-modal.open"))),i=e(s.target)[0]===e("."+n.bgClass)[0];if(i&&!n.closeOnBackgroundClick)return;t.locked=!0,t.close.call(t,i?e(".reveal-modal.open"):e(this).closest(".reveal-modal"))}}),e(this.scope).hasClass("reveal-modal")?e(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):e(this.scope).on("open.fndtn.reveal",".reveal-modal",this.settings.open).on("opened.fndtn.reveal",".reveal-modal",this.settings.opened).on("opened.fndtn.reveal",".reveal-modal",this.open_video).on("close.fndtn.reveal",".reveal-modal",this.settings.close).on("closed.fndtn.reveal",".reveal-modal",this.settings.closed).on("closed.fndtn.reveal",".reveal-modal",this.close_video),e("body").bind("keyup.reveal",function(s){var n=e(".reveal-modal.open"),i=e.extend({},t.settings,t.data_options(n));27===s.which&&i.closeOnEsc&&n.foundation("reveal","close")}),!0},open:function(t,s){if(t)if("undefined"!=typeof t.selector)var n=e("#"+t.data("reveal-id"));else{var n=e(this.scope);s=t}else var n=e(this.scope);if(!n.hasClass("open")){var i=e(".reveal-modal.open");if("undefined"==typeof n.data("css-top")&&n.data("css-top",parseInt(n.css("top"),10)).data("offset",this.cache_offset(n)),n.trigger("open"),i.length<1&&this.toggle_bg(),"undefined"!=typeof s&&s.url){var o=this,a="undefined"!=typeof s.success?s.success:null;e.extend(s,{success:function(t,s,d){e.isFunction(a)&&a(t,s,d),n.html(t),e(n).foundation("section","reflow"),o.hide(i,o.settings.css.close),o.show(n,o.settings.css.open)}}),e.ajax(s)}else this.hide(i,this.settings.css.close),this.show(n,this.settings.css.open)}},close:function(t){var t=t&&t.length?t:e(this.scope),s=e(".reveal-modal.open");s.length>0&&(this.locked=!0,t.trigger("close"),this.toggle_bg(),this.hide(s,this.settings.css.close))},close_targets:function(){var e="."+this.settings.dismissModalClass;return this.settings.closeOnBackgroundClick?e+", ."+this.settings.bgClass:e},toggle_bg:function(){0===e("."+this.settings.bgClass).length&&(this.settings.bg=e("<div />",{"class":this.settings.bgClass}).appendTo("body")),this.settings.bg.filter(":visible").length>0?this.hide(this.settings.bg):this.show(this.settings.bg)},show:function(s,n){if(n){if(0===s.parent("body").length){var i=s.wrap('<div style="display: none;" />').parent();s.on("closed.fndtn.reveal.wrapped",function(){s.detach().appendTo(i),s.unwrap().unbind("closed.fndtn.reveal.wrapped")}),s.detach().appendTo("body")}if(/pop/i.test(this.settings.animation)){n.top=e(t).scrollTop()-s.data("offset")+"px";var o={top:e(t).scrollTop()+s.data("css-top")+"px",opacity:1};return this.delay(function(){return s.css(n).animate(o,this.settings.animationSpeed,"linear",function(){this.locked=!1,s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var o={opacity:1};return this.delay(function(){return s.css(n).animate(o,this.settings.animationSpeed,"linear",function(){this.locked=!1,s.trigger("opened")}.bind(this)).addClass("open")}.bind(this),this.settings.animationSpeed/2)}return s.css(n).show().css({opacity:1}).addClass("open").trigger("opened")}return/fade/i.test(this.settings.animation)?s.fadeIn(this.settings.animationSpeed/2):s.show()},hide:function(s,n){if(n){if(/pop/i.test(this.settings.animation)){var i={top:-e(t).scrollTop()-s.data("offset")+"px",opacity:0};return this.delay(function(){return s.animate(i,this.settings.animationSpeed,"linear",function(){this.locked=!1,s.css(n).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}if(/fade/i.test(this.settings.animation)){var i={opacity:0};return this.delay(function(){return s.animate(i,this.settings.animationSpeed,"linear",function(){this.locked=!1,s.css(n).trigger("closed")}.bind(this)).removeClass("open")}.bind(this),this.settings.animationSpeed/2)}return s.hide().css(n).removeClass("open").trigger("closed")}return/fade/i.test(this.settings.animation)?s.fadeOut(this.settings.animationSpeed/2):s.hide()},close_video:function(){var t=e(this).find(".flex-video"),s=t.find("iframe");s.length>0&&(s.attr("data-src",s[0].src),s.attr("src","about:blank"),t.hide())},open_video:function(){var t=e(this).find(".flex-video"),s=t.find("iframe");if(s.length>0){var i=s.attr("data-src");if("string"==typeof i)s[0].src=s.attr("data-src");else{var o=s[0].src;s[0].src=n,s[0].src=o}t.show()}},cache_offset:function(e){var t=e.show().height()+parseInt(e.css("top"),10);return e.hide(),t},off:function(){e(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(Foundation.zj,this,this.document);